<script>
(function () {
  const GITHUB_REPO = "kmnelson/figma-plugin";
  const TAG = "deploy";
  const DATA_PATH = "circle-data/circles.json";
  const url = "https://raw.githubusercontent.com/" + GITHUB_REPO + "/" + TAG + "/" + DATA_PATH;

  fetch(url)
    .then(function (res) {
      if (!res.ok) throw new Error(res.status + " " + res.statusText);
      return res.json();
    })
    .then(function (data) {
      if (!Array.isArray(data)) throw new Error("Expected JSON array of { x, y, r }");
      parent.postMessage({ pluginMessage: { type: "draw-circles", circles: data } }, "*");
    })
    .catch(function (err) {
      parent.postMessage({ pluginMessage: { type: "error", message: err.message } }, "*");
    });
})();
</script>
